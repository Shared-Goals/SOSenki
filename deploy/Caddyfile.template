# SOSenki Caddy reverse proxy template
# Generated by: make install-caddy
# Location: /etc/caddy/Caddyfile (or append to existing)
#
# Prerequisites:
# - Domain DNS pointing to this server (A record or DuckDNS)
# - Ports 80/443 open for Let's Encrypt ACME challenge

${DOMAIN} {
    # Automatic HTTPS via Let's Encrypt
    
    # Reverse proxy to FastAPI
    reverse_proxy localhost:8000

    # Logging
    log {
        output file /var/log/caddy/sosenki.log
        format json
    }

    # Headers for Telegram Web App
    header {
        X-Content-Type-Options "nosniff"
        X-Frame-Options "SAMEORIGIN"
        Referrer-Policy "strict-origin-when-cross-origin"
    }
}
